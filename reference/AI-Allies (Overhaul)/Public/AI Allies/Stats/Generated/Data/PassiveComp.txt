new entry "GiveAlliesSpell"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_Allies)"

new entry "UnlockAlliesExtraSpells"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_Allies_Extra_Spells)"

new entry "UnlockAlliesExtraSpells_ALT"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_Allies_Extra_Spells_ALT)"

new entry "UnlockAlliesOrders"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Allies_Orders)"

new entry "UnlockAlliesOrdersBonus"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Allies_Orders_Bonus)"

new entry "UnlockCustomArchetypes"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_Allies_Custom_Archetypes)"

new entry "AlliesMind"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_Allies_Mindcontrol_Orders)"

new entry "AlliesSwarm"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_Allies_Swarm_Container)"

new entry "AlliesThrowingDisabled"
type "PassiveData"
data "Properties" "IsHidden"

new entry "AlliesDashingDisabled"
type "PassiveData"
data "Properties" "IsHidden"

new entry "AlliesDynamicSpellblock"
type "PassiveData"
data "Properties" "IsHidden"
data "BoostContext" "OnCreate;OnHealed;OnDamaged;OnStatusApplied;OnStatusRemoved"
data "BoostConditions" "HasStatus('AI_ALLY', context.Source)"
data "Boosts" "IF(HasHPPercentageMoreThan(99, context.Source)):ActionResourceBlock(SpellSlot,1);IF(HasHPPercentageMoreThan(99, context.Source)):ActionResourceBlock(SpellSlot,2);IF(HasHPPercentageMoreThan(99, context.Source)):ActionResourceBlock(SpellSlot,3);IF(HasHPPercentageMoreThan(99, context.Source)):ActionResourceBlock(SpellSlot,4);IF(HasHPPercentageMoreThan(99, context.Source)):ActionResourceBlock(SpellSlot,5);IF(HasHPPercentageMoreThan(99, context.Source)):ActionResourceBlock(SpellSlot,6);IF(HasHPPercentageMoreThan(89, context.Source)):ActionResourceBlock(SpellSlot,2);IF(HasHPPercentageMoreThan(89, context.Source)):ActionResourceBlock(SpellSlot,3);IF(HasHPPercentageMoreThan(89, context.Source)):ActionResourceBlock(SpellSlot,4);IF(HasHPPercentageMoreThan(89, context.Source)):ActionResourceBlock(SpellSlot,5);IF(HasHPPercentageMoreThan(89, context.Source)):ActionResourceBlock(SpellSlot,6);IF(HasHPPercentageMoreThan(79, context.Source)):ActionResourceBlock(SpellSlot,3);IF(HasHPPercentageMoreThan(79, context.Source)):ActionResourceBlock(SpellSlot,4);IF(HasHPPercentageMoreThan(79, context.Source)):ActionResourceBlock(SpellSlot,5);IF(HasHPPercentageMoreThan(79, context.Source)):ActionResourceBlock(SpellSlot,6);IF(HasHPPercentageMoreThan(69, context.Source)):ActionResourceBlock(SpellSlot,4);IF(HasHPPercentageMoreThan(69, context.Source)):ActionResourceBlock(SpellSlot,5);IF(HasHPPercentageMoreThan(69, context.Source)):ActionResourceBlock(SpellSlot,6);IF(HasHPPercentageMoreThan(59, context.Source)):ActionResourceBlock(SpellSlot,5);IF(HasHPPercentageMoreThan(59, context.Source)):ActionResourceBlock(SpellSlot,6);IF(HasHPPercentageMoreThan(49, context.Source)):ActionResourceBlock(SpellSlot,6)"


new entry "AlliesToggleNPC"
type "PassiveData"
data "DisplayName" "8e4b2a0e-39b9-4026-9e98-d83e1e681019;1"
data "Description" "bceee95c-7823-45be-8f36-e967d8696431;1"
data "Icon" "GenericIcon_Intent_Control"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "ToggleOnFunctors" "ApplyStatus(ToggleIsNPC,100,-1);ApplyStatus(REAPPLY_NPC_PASSIVE_NEEDED,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(ToggleIsNPC);RemoveStatus(REAPPLY_NPC_PASSIVE_NEEDED)"
data "StatsFunctorContext" "OnDamaged;OnStatusApplied"
data "Conditions" "not HasStatus('REAPPLY_NPC_PASSIVE') and (HasHPPercentageEqualOrLessThan(0) or IsKillingBlow()) and HasStatus('REAPPLY_NPC_PASSIVE_NEEDED')"
data "StatsFunctors" "ApplyStatus(REAPPLY_NPC_PASSIVE, 100, -1)"

new entry "ToggleAlliesCasting"
type "PassiveData"
data "DisplayName" "e7807eb6-e3dd-4f96-9e12-6947bd4c5e89;1"
data "Description" "97864655-ea16-4994-b358-039e848e6818;1"
data "Icon" "Spell_Abjuration_ArcaneLock"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "ToggleOnFunctors" "ApplyStatus(AlliesCastingAllowed,100,-1);ApplyStatus(REAPPLY_BLOCKCAST_PASSIVE_NEEDED,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(AlliesCastingAllowed);RemoveStatus(REAPPLY_BLOCKCAST_PASSIVE_NEEDED)"
data "StatsFunctorContext" "OnDamaged;OnStatusApplied"
data "Conditions" "not HasStatus('REAPPLY_BLOCKCAST_PASSIVE') and (HasHPPercentageEqualOrLessThan(0) or IsKillingBlow()) and HasStatus('REAPPLY_BLOCKCAST_PASSIVE_NEEDED')"
data "StatsFunctors" "ApplyStatus(REAPPLY_BLOCKCAST_PASSIVE, 100, -1)"